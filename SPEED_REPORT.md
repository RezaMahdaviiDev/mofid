# گزارش تست‌های سرعت خرید (Speed Benchmarking Report)

تاریخ: ۲۰۲۶-۰۱-۰۶
نماد هدف: **زر**
تعداد: ۲ عدد
قیمت: ۵۹۰,۰۰۰ ریال

## استراتژی تست‌ها
در این بنچمارک، ۴ روش مختلف فنی برای ثبت سفارش خرید در ایزی‌تریدر مقایسه می‌شوند تا سریع‌ترین متد شناسایی شود.

## جدول مقایسه زمان‌بندی (میلی‌ثانیه)

| مرحله | مدل ۱ (Standard) | مدل ۲ (Keyboard) | مدل ۳ (JS-Inject) | مدل ۴ (Ultra) | مدل ۵ (API) |
| :--- | :---: | :---: | :---: | :---: | :---: |
| **انتخاب نماد** | ۲۱۲ | ۲۱۷ | ۲۰۳ | --- | --- |
| **باز کردن پنل** | ۳۴۰ | ۱۷۱ | ۱۸۷ | --- | --- |
| **پر کردن فرم** | ۱۷۴ | ۹۴۹ | ۷۶ | --- | --- |
| **ارسال سفارش** | ۲۳۴ | ۱۴۱ | ۲۹۷ | --- | ۱۱۵ |
| **زمان کل (Total)** | **۹۶۰** | **۱۴۷۸** | **۷۶۳** | **۲۰۲** | **۳۶۴** (با fallback: ۱۷۴۰) |

---

## تحلیل نهایی
- **سریع‌ترین روش**: مدل ۴ (Ultra Aggressive) با زمان ۲۰۲ میلی‌ثانیه.
- **پایدارترین روش سریع**: مدل ۳ (JS-Injection) با زمان ۷۶۳ میلی‌ثانیه.
- **مدل ۵ (API Direct)**: زمان ۳۶۴ میلی‌ثانیه (در صورت موفقیت authentication). در حال حاضر با خطای 401 مواجه است و به UI automation fallback می‌کند.
- **توصیه**: 
  - برای رقابت‌های میلی‌ثانیه‌ای: **مدل ۴** (۲۰۲ms)
  - برای پایداری و سرعت متعادل: **مدل ۳** (۷۶۳ms)
  - برای آینده (پس از حل مشکل authentication): **مدل ۵** (API) می‌تواند به زیر ۱۰۰ms برسد


---

## توضیحات فنی مدل‌ها

### مدل ۱: Standard-Fast
- استفاده از Playwright Locators استاندارد.
- استفاده از `fill({ force: true })` برای سرعت و پایداری.

### مدل ۲: Keyboard-Focus
- استفاده از میان‌برهای کیبورد (`Tab`, `Enter`).
- کمترین میزان تعامل با ماوس.

### مدل ۳: JS-Injection
- تغییر مستقیم مقادیر `value` اینپوت‌ها از طریق `page.evaluate()`.
- دور زدن لایه‌های شبیه‌سازی Playwright.

### مدل ۴: Ultra-Aggressive
- حذف هرگونه وقفه (`waitForTimeout`) و انتظار برای لود کامل.
- اجرای دستورات به محض پیدا شدن المنت در DOM.

### مدل ۵: API Direct
- ارسال مستقیم درخواست به `https://api-mts.orbis.easytrader.ir/core/api/v2/order`
- دور زدن کامل UI automation
- **مزیت**: سرعت بالقوه زیر ۱۰۰ms
- **چالش**: نیاز به authentication صحیح (در حال حاضر 401 Unauthorized)
- **Fallback**: در صورت خطا، به UI automation برمی‌گردد

