# ุฏูุชุฑฺู ฺฏุฒุงุฑุด ูพุดุฑูุช ูพุฑูฺู (Agah/EasyTrader Auto-Buy)

## ุชุงุฑุฎ: ถ ฺุงููู ฒฐฒถ (ฑถ ุฏ ฑดฐด)

### ฑ. ุดุฑูุน ูพุฑูฺู ุจุง ฺฉุงุฑฺฏุฒุงุฑ ุขฺฏุงู (ุขุณุงุชุฑุฏุฑ)
- **ูุฏู**: ุงุฌุงุฏ ุฑุจุงุช ุฎุฑุฏ ุฎูุฏฺฉุงุฑ ุจุฑุง ููุงุฏ "ุนุงุฑ".
- **ุฒุฑุณุงุฎุช**: ุฑุงูโุงูุฏุงุฒ ูพุฑูฺู ุจุง Playwright ู TypeScript. ูุฏุฑุช Session ุจุฑุง ุฏูุฑ ุฒุฏู ฺฉูพฺุง ุจุง ููููุช ูพุงุฏูโุณุงุฒ ุดุฏ.
- **ฺุงูุดโูุง**: 
    - ุณุงุฎุชุงุฑ ุฌุฏูู ุฏุงุฑุงโูุง ู ุฏุฏูโุจุงู ุฏุฑ ุขฺฏุงู ุงุฒ `AG-Grid` ุจุง ูุงุจูุช Virtual Scrolling ุงุณุชูุงุฏู ูโฺฉูุฏ.
    - ุดูุงุณุง ุฏฺฉููโูุง ุฎุฑุฏ ุฏุงุฎู ุฑุฏูโูุง ุฌุฏูู ุจุณุงุฑ ุฏุดูุงุฑ ู ุดฺฉููุฏู ุจูุฏ.
    - ุจุง ูุฌูุฏ ุงุณุชูุงุฏู ุงุฒ ฺูุฏู Recording (ูุงูโูุง 1ุ 2ุ 3 ู 5)ุ ุณูฺฉุชูุฑูุง ุฏุฑ ูุญุท ุงุชููุงุณูู ุจุง ุฎุทุง ููุงุฌู ูโุดุฏูุฏ.
- **ุชูุงุดโูุง ุงูุฌุงู ุดุฏู**:
    - ุฌุณุชุฌู ููุดููุฏ (OmniSearch) ุฏุฑ ฺฉู ุตูุญุงุช.
    - ุชุณุช ุงุฎุชุตุงุต ุฑู ุขฺฉููโูุง `fa-cart-shopping`.
    - ุงุณุชูุงุฏู ุงุฒ `force click` ู `scrollIntoView`.
- **ูุชุฌู**: ุจู ุฏูู ูพฺุฏฺฏ ุณุงุฎุชุงุฑ HTML ู ุนุฏู ูพุงุฏุงุฑ ุณูฺฉุชูุฑูุงุ ุชุตูู ุจู ููุงุฌุฑุช ุจู ฺฉุงุฑฺฏุฒุงุฑ ููุฏ ฺฏุฑูุชู ุดุฏ.

### ณ. ุงููู ุฎุฑุฏ ูููู ุฏุฑ ุงุฒโุชุฑุฏุฑ (ููุฏ)
- **ุชุงุฑุฎ**: ถ ฺุงููู ฒฐฒถ
- **ูุชุฌู**: ููููุชโุขูุฒ โ
- **ุฌุฒุฆุงุช**: ฑฐ ุนุฏุฏ ููุงุฏ ุนุงุฑ ุจู ููุช ณทน,ฐฐฐ ุฑุงู ุจุง ููููุช ุงุฒ ุทุฑู ุฑุจุงุช ุฎุฑุฏุงุฑ ุดุฏ.
- **ุงูุชู ฺฉูุฏ**: ุงุณุชูุงุฏู ุงุฒ ุณูฺฉุชูุฑูุง `data-cy` (ูุซู `[data-cy='order-buy-btn']`) ูพุงุฏุงุฑ ุฑุจุงุช ุฑุง ฑฐฐูช ุงูุฒุงุด ุฏุงุฏ.
- **ฺฏุงู ุจุนุฏ**: ุจูููโุณุงุฒ ุณุฑุนุช ู ูุงฺฏโฺฏุฑ ุฏูู ูุฑ ูุฑุญูู (Latency Tracking).

---

## ูุงฺฏ ุนููฺฉุฑุฏ (Performance Logs)
| ูุฑุญูู | ุฒูุงู (ms) | ูุถุนุช |
|-------|-----------|-------|
| ุจุงุฒ ฺฉุฑุฏู ูุฑูุฑฺฏุฑ | - | โ ูููู |
| ููุฏ ูพูู ูุนุงููุงุช | ฑตฐฐฐ | โ ูููู |
| ุงูุชุฎุงุจ ููุงุฏ | ฒฐณ | โ ูุฏู ณ |
| ุจุงุฒ ฺฉุฑุฏู ูพูู ุฎุฑุฏ | ฑธท | โ ูุฏู ณ |
| ูพุฑ ฺฉุฑุฏู ูุฑู | ทถ | โ ูุฏู ณ |
| ุงุฑุณุงู ููุง | ฒนท | โ ูุฏู ณ |
| **ุฒูุงู ฺฉู ุนููุงุช (Ultra)** | **ฒฐฒ** | **๐ ุฑฺฉูุฑุฏ ุฌูุงู!** |

### ต. ุจูฺูุงุฑฺฉ ด ูุฏู ุชุณุช (ููุงุฏ ุฒุฑ)
- **ูุฏู ฑ (Standard)**: นถฐms - ุฑูุด ุงูู ู ุงุณุชุงูุฏุงุฑุฏ.
- **ูุฏู ฒ (Keyboard)**: ฑดทธms - ฺฉูุฏ ุจู ุฏูู ุดุจูโุณุงุฒ ุชุงูพ.
- **ูุฏู ณ (JS-Inject)**: ทถณms - ุจุณุงุฑ ุณุฑุน ู ูุงุจู ุงุนุชูุงุฏ.
- **ูุฏู ด (Ultra)**: ฒฐฒms - ุงุณุชูุงุฏู ุงุฒ ุงูุชุฑูุงูโูุง ุณุทุญ ูพุงู JS ุจุฑุง ุญุฐู ูุฑฺฏููู ุชุฃุฎุฑ ููุฏูฺฏ. ุงู ุฑูุด ุจุฑุง ุณุฑุฎุท ุฒุฏู ุงุฏูโุขู ุงุณุช.

### ด. ุจูููโุณุงุฒโูุง ุงุนูุงู ุดุฏู ุฏุฑ ููุฏ
- ุฌุงฺฏุฒู `click` ุจุง `fill({ force: true })` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุณุฏูุฏ ุดุฏู ุชูุณุท Popoverูุง ุณุณุชู.
- ุงุณุชูุงุฏู ุงุฒ `Promise.all` ุจุฑุง ูพุฑ ฺฉุฑุฏู ููุฒูุงู ููุฏ ููุช ู ุญุฌู.
- ุญุฐู ฺฉุงูู `waitForTimeout` ูุง ุบุฑุถุฑูุฑ ู ุงุณุชูุงุฏู ุงุฒ ุณูฺฉุชูุฑูุง `data-cy`.

### ถ. ุชุนูุฑ ูุฏู ต (API Direct) - ูุงุฒ ููุดููุฏุณุงุฒ
- **ุชุงุฑุฎ**: ถ ฺุงููู ฒฐฒถ (ุจุนุฏ ุงุฒ ุธูุฑ)
- **ูุดฺฉู**: ุฏุฑุงูุช ุฎุทุง `401 Unauthorized` ุฏุฑ ุฏุฑุฎูุงุณุชโูุง ูุณุชูู API.
- **ุนูุช**: ุณุฑูุฑ ุงุฒโุชุฑุฏุฑ ุนูุงูู ุจุฑ ฺฉูฺฉุ ุจู ูุฏุฑูุง `Authorization` (Bearer Token) ู `X-Xsrf-Token` ูุงุฒ ุฏุงุฑุฏ ฺฉู ุฏุฑ ุฏุฑุฎูุงุณุชโูุง ุณุงุฏู `fetch` ุงุฑุณุงู ููโุดุฏูุฏ.
- **ุฑุงู ุญู ูพุงุฏูโุณุงุฒ ุดุฏู**:
    - ุงุฌุงุฏ ุชุงุจุน `getAuthHeaders` ฺฉู ุชุฑุงูฺฉ ุดุจฺฉู ุฑุง ุดููุฏ ูโฺฉูุฏ.
    - ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ุชูฺฉู ุงุฒ ุฏุฑุฎูุงุณุชโูุง ูุงูุน ูุฑูุฑฺฏุฑ (Real-time Token Sniffing).
    - ุงุณุชูุงุฏู ุงุฒ `page.request` ฺฉู ฺฉูฺฉโูุง ุฑุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุฏุฑุช ูโฺฉูุฏ.
- **ูุถุนุช ูุนู**: ฺฉุฏ ุจูโุฑูุฒุฑุณุงู ุดุฏู ู ูุดฺฉู ุจุฑุทุฑู ุดุฏู ุงุณุช.

### ท. ุณุงุฎุช ุฏุงุดุจูุฑุฏ ูุจ ุณุงุฏู - ูุงุฒ ุฑุงุจุท ฺฉุงุฑุจุฑ
- **ุชุงุฑุฎ**: ถ ฺุงููู ฒฐฒถ (ุนุตุฑ)
- **ูุฏู**: ุงุฌุงุฏ ุฑุงุจุท ฺฉุงุฑุจุฑ ุณุงุฏู ู ฺฉุงุฑุจุฑูพุณูุฏ ุจุฑุง ุงุณุชูุงุฏู ุขุณุงู ุงุฒ ุฑุจุงุช
- **ุชฺฉููููฺโูุง**: Express.js, HTML/CSS/JavaScript (ุจุฏูู ูุฑูโูุฑฺฉ)
- **ูฺฺฏโูุง ูพุงุฏูโุณุงุฒ ุดุฏู**:
    - โ ุณุฑูุฑ Express ุณุงุฏู ุฏุฑ ูพูุฑุช 3000
    - โ ุฑุงุจุท ฺฉุงุฑุจุฑ ุฒุจุง ู Responsive
    - โ ูุฑู ุณูุงุฑุด ุจุง ุชูุงู ฺฏุฒููโูุง (ููุงุฏุ ููุชุ ุชุนุฏุงุฏุ ูุฏู)
    - โ ฺฏุฒูู Debug (ููุงุด/ูุฎู ฺฉุฑุฏู ูุฑูุฑฺฏุฑ)
    - โ ููุงุด ูุถุนุช ุณูุงุฑุด (ููููุชุ ุฎุทุงุ ุฏุฑ ุญุงู ุงุฌุฑุง)
    - โ ุชุงุฑุฎฺู ูุนุงููุงุช (ุฐุฎุฑู ุฏุฑ localStorage)
    - โ ุตูุญู ูุงฺฏู ุจุง ูุฏุฑุช session
    - โ Headless mode ุจู ุตูุฑุช ูพุดโูุฑุถ (ูุฑูุฑฺฏุฑ ูุฎู)
- **ุณุงุฎุชุงุฑ**:
    - `src/dashboard/server.ts` - ุณุฑูุฑ Express
    - `src/dashboard/routes/buy.ts` - API endpoint ุณูุงุฑุด
    - `src/dashboard/routes/login.ts` - API endpoint ูุงฺฏู
    - `src/dashboard/public/` - ูุงูโูุง ุงุณุชุงุชฺฉ (HTML, CSS, JS)
- **ูุณุชูุฏุงุช**:
    - `docs/guides/dashboard-guide.md` - ุฑุงูููุง ฺฉุงูู ุงุณุชูุงุฏู
- **ูุชุฌู**: ุฏุงุดุจูุฑุฏ ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช. ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุจู ุฑุงุญุช ุงุฒ ุฑุงุจุท ฺฉุงุฑุจุฑ ุจุฑุง ุฎุฑุฏ/ูุฑูุด ุงุณุชูุงุฏู ฺฉููุฏ.

### ธ. ูพุงุฏูโุณุงุฒ API Client ู Refactoring
- **ุชุงุฑุฎ**: ท ฺุงููู ฒฐฒถ
- **ูุฏู**: ุงุฌุงุฏ API Client ูุงฺููุงุฑ ู ูุงุจู ุงุณุชูุงุฏู ูุฌุฏุฏ ุจุฑุง ฺฉุงุฑ ุจุง APIูุง ุงุฒโุชุฑุฏุฑ
- **ูฺฺฏโูุง ูพุงุฏูโุณุงุฒ ุดุฏู**:
    - โ `EasyTraderAPIClient`: ฺฉูุงุณ ุงุตู ุจุฑุง ูุฏุฑุช authentication ู ุฏุฑุฎูุงุณุชโูุง
    - โ `getAuthHeaders()`: ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ุชูฺฉูโูุง ู ูุฏุฑูุง authentication ุงุฒ ุชุฑุงูฺฉ ุดุจฺฉู
    - โ `placeOrder()`: ุซุจุช ุณูุงุฑุด ุฎุฑุฏ/ูุฑูุด
    - โ `getOrders()`: ุฏุฑุงูุช ูุณุช ุณูุงุฑุดุงุช
    - โ `getQueuePosition()`: ุฏุฑุงูุช ุฌุงฺฏุงู ุณูุงุฑุด ุฏุฑ ุตู
    - โ `monitorOrder()`: ูุงูุชูุฑูฺฏ ุฌุงฺฏุงู ุณูุงุฑุด ุจุง interval
- **ุณุงุฎุชุงุฑ**:
    - `src/brokerages/easy/api/client.ts` - API Client ุงุตู
    - `src/brokerages/easy/api/types.ts` - Types ู Interfaces
    - `src/brokerages/easy/api/order.ts` - APIูุง ุณูุงุฑุด
    - `src/brokerages/easy/api/index.ts` - Export ูุฑฺฉุฒ
- **ูุณุชูุฏุงุช**:
    - `docs/api/easytrader-api-spec.md` - ูุณุชูุฏุงุช ฺฉุงูู APIูุง
    - `docs/api/client-usage.md` - ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ API Client

### น. ูพุงุฏูโุณุงุฒ Asset Tracking ุฏุฑ Dashboard
- **ุชุงุฑุฎ**: ท ฺุงููู ฒฐฒถ
- **ูุฏู**: ููุงุด ููุฌูุฏ ููุฏ ู ุชุบุฑุงุช ุขู ูพุณ ุงุฒ ูุฑ ูุนุงููู
- **ูฺฺฏโูุง ูพุงุฏูโุณุงุฒ ุดุฏู**:
    - โ `getCashBalance()`: ุงุณุชุฎุฑุงุฌ ููุฌูุฏ ููุฏ ุงุฒ ุตูุญู ุจุง ุงุณุชูุงุฏู ุงุฒ XPath
    - โ ุฎูุงูุฏู ููุฌูุฏ ูุจู ุงุฒ ูุนุงููู
    - โ ุฎูุงูุฏู ููุฌูุฏ ุจุนุฏ ุงุฒ ูุนุงููู
    - โ ูุญุงุณุจู ุชุบุฑ ููุฌูุฏ
    - โ ุงุนุชุจุงุฑุณูุฌ ุชุทุงุจู ุชุบุฑ ููุฌูุฏ ุจุง ููุน ูุนุงููู:
        - ุฎุฑุฏ ูููู โ ููุฌูุฏ ุจุงุฏ ฺฉุงูุด ุงุจุฏ
        - ูุฑูุด ูููู โ ููุฌูุฏ ุจุงุฏ ุงูุฒุงุด ุงุจุฏ
    - โ ููุงุด ููุฌูุฏ ุฏุฑ ุจุฎุด ุฌุฏุงฺฏุงูู ุฏุฑ Dashboard
    - โ ููุงุด ุชุบุฑ ููุฌูุฏ ุจุง ุฑูฺฏโุจูุฏ (ุณุจุฒ ุจุฑุง ุงูุฒุงุดุ ูุฑูุฒ ุจุฑุง ฺฉุงูุด)
    - โ ููุงุด Badge ุงุนุชุจุงุฑุณูุฌ ุฏุฑ ุชุงุฑุฎฺู ูุนุงููุงุช
- **ุณุงุฎุชุงุฑ**:
    - `src/brokerages/easy/buyAction.ts` - ุชุงุจุน `getCashBalance()`
    - `src/dashboard/routes/buy.ts` - ููุทู ุฎูุงูุฏู ููุฌูุฏ ู validation
    - `src/dashboard/public/app.js` - ููุงุด ููุฌูุฏ ุฏุฑ UI
    - `src/dashboard/public/style.css` - ุงุณุชุงูโูุง ุจุฎุด ุฏุงุฑุง

### ฑฐ. ุงุถุงูู ฺฉุฑุฏู ูพุดุชุจุงู ุงุฒ ูุฑูุด ุฏุฑ Dashboard
- **ุชุงุฑุฎ**: ท ฺุงููู ฒฐฒถ
- **ูุฏู**: ุงูฺฉุงู ุงูุฌุงู ูุฑูุด ุงุฒ ุทุฑู Dashboard
- **ูฺฺฏโูุง ูพุงุฏูโุณุงุฒ ุดุฏู**:
    - โ Select ุจุฑุง ุงูุชุฎุงุจ ููุน ุณูุงุฑุด (ุฎุฑุฏ/ูุฑูุด)
    - โ ุชุบุฑ ุฎูุฏฺฉุงุฑ ูุชู ุฏฺฉูู ุจุฑ ุงุณุงุณ ููุน ุณูุงุฑุด (๐ ุฎุฑุฏ / ๐ฐ ูุฑูุด)
    - โ ููุงุด ููุน ูุนุงููู ุฏุฑ ุชุงุฑุฎฺู (๐ข ุฎุฑุฏ / ๐ด ูุฑูุด)
    - โ ูพุดุชุจุงู ุงุฒ ูุฑูุด ุฏุฑ ุชูุงู ูุฏูโูุง (1, 4, 5)
- **ุณุงุฎุชุงุฑ**:
    - `src/dashboard/public/index.html` - Select ููุน ุณูุงุฑุด
    - `src/dashboard/public/app.js` - ููุทู ุชุบุฑ ุฏฺฉูู ู ููุงุด ููุน ูุนุงููู

### ฑฑ. ุณุงุฒูุงูุฏู ูุณุชูุฏุงุช
- **ุชุงุฑุฎ**: ท ฺุงููู ฒฐฒถ
- **ูุฏู**: ุงุฌุงุฏ ุณุงุฎุชุงุฑ ููุธู ู ูุงุจู ูฺฏูุฏุงุฑ ุจุฑุง ูุณุชูุฏุงุช
- **ุณุงุฎุชุงุฑ ุฌุฏุฏ**:
    - `docs/api/` - ูุณุชูุฏุงุช APIูุง
    - `docs/guides/` - ุฑุงูููุงูุง ฺฉุงุฑุจุฑ
    - `docs/development/` - ูุณุชูุฏุงุช ุชูุณุนู
    - `docs/reports/` - ฺฏุฒุงุฑุดโูุง
- **ูุงูโูุง ููุชูู ุดุฏู**:
    - ุชูุงู ูุณุชูุฏุงุช ุงุฒ root ุจู ูพูุดูโูุง ููุงุณุจ ููุชูู ุดุฏูุฏ
    - `33.txt` ุจู `docs/api/easytrader-api-spec.md` ุชุจุฏู ุดุฏ
- **ูุณุชูุฏุงุช ุจูโุฑูุฒุฑุณุงู ุดุฏู**:
    - ุชูุงู ูุณุชูุฏุงุช ุจุง ูฺฺฏโูุง ุฌุฏุฏ ุจูโุฑูุฒุฑุณุงู ุดุฏูุฏ
    - ููฺฉโูุง ุฏุงุฎู ุงุตูุงุญ ุดุฏูุฏ

---

## ุงุฏุฏุงุดุชโูุง ููู

- ุชูุงู ูุฏูโูุง ุฎุฑุฏ ุงุฒ ุณูฺฉุชูุฑูุง `data-cy` ุงุณุชูุงุฏู ูโฺฉููุฏ ฺฉู ูพุงุฏุงุฑ ุจุงูุง ุฏุงุฑูุฏ.
- Session ุฏุฑ `.user-data/easy/` ุฐุฎุฑู ูโุดูุฏ ู ูุงุฒ ุจู ูุงฺฏู ูุฌุฏุฏ ุฏุฑ ูุฑ ุงุฌุฑุง ูุณุช.
- Dashboard ุจุฑุง ุงุณุชูุงุฏู ุณุงุฏู ฺฉุงุฑุจุฑุงู ุทุฑุงุญ ุดุฏู ุงุณุช ู ุชูุงู ูุงุจูุชโูุง ุฑุจุงุช ุฑุง ูพูุดุด ูโุฏูุฏ.
- Asset Tracking ุจู ฺฉุงุฑุจุฑ ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุชุบุฑุงุช ููุฌูุฏ ุฑุง ุฑุฏุงุจ ฺฉูุฏ ู ุตุญุช ูุนุงููุงุช ุฑุง ุชุฃุฏ ฺฉูุฏ.


