{
  "transaction": {
    "orderId": "buy-1767788216265",
    "timestamp": 1767788216265,
    "model": "4",
    "symbol": "زر",
    "price": "682300",
    "quantity": "2",
    "side": "sell",
    "duration": 2577,
    "success": true
  },
  "timingBreakdown": {
    "phases": [
      {
        "name": "Browser Launch + Page Navigation (Pre-transaction)",
        "duration": 0,
        "percentage": 0,
        "startTime": 1767788194211,
        "endTime": 1767788213660,
        "logs": [
          {
            "timestamp": 1767788194211,
            "level": "INFO",
            "location": "buy.ts:POST",
            "message": "Buy request received",
            "data": {
              "symbol": "زر",
              "price": 682300,
              "quantity": 2,
              "model": "4",
              "debug": false,
              "side": "sell"
            }
          }
        ],
        "details": {
          "browserLaunchDuration": 0,
          "pageLoadDuration": 0,
          "waitDuration": 15000,
          "actualDuration": 19449,
          "note": "This phase occurs before transaction timestamp, so duration is not counted in transaction breakdown"
        }
      },
      {
        "name": "Balance Reading (Before)",
        "duration": 0,
        "percentage": 0,
        "startTime": 1767788213660,
        "endTime": 1767788213660,
        "logs": [
          {
            "timestamp": 1767788213660,
            "level": "INFO",
            "location": "buyAction.ts:getCashBalance",
            "message": "Balance extracted successfully",
            "data": {
              "balance": 13624052
            }
          },
          {
            "timestamp": 1767788213660,
            "level": "INFO",
            "location": "buyAction.ts:getCashBalance",
            "message": "Balance extracted successfully",
            "data": {
              "balance": 13624052
            }
          }
        ],
        "details": {
          "balance": 13624052
        }
      },
      {
        "name": "Buy Process (Selection + Panel + Fill + Submit)",
        "duration": 2577,
        "percentage": 100,
        "startTime": 1767788213686,
        "endTime": 1767788216263,
        "logs": [
          {
            "timestamp": 1767788213686,
            "level": "INFO",
            "location": "buyActionUltra.ts:executeUltraBuy",
            "message": "Starting buy process",
            "data": {
              "model": 4,
              "side": "sell",
              "order": {
                "symbol": "زر",
                "price": "682300",
                "quantity": "2",
                "side": "sell"
              }
            }
          },
          {
            "timestamp": 1767788216263,
            "level": "INFO",
            "location": "buyActionUltra.ts:Submit_Order",
            "message": "Order verified successfully",
            "data": {
              "quantity": 2,
              "price": 682300,
              "date": "15:46:54 1404/10/17"
            }
          }
        ],
        "details": {
          "startMessage": "Starting buy process",
          "endMessage": "Order verified successfully",
          "orderCreated": 1767788213682
        }
      },
      {
        "name": "Balance Reading (After)",
        "duration": 2,
        "percentage": 0.07760962359332557,
        "startTime": 1767788218276,
        "endTime": 1767788218278,
        "logs": [
          {
            "timestamp": 1767788218276,
            "level": "INFO",
            "location": "buyAction.ts:getCashBalance",
            "message": "Balance extracted successfully",
            "data": {
              "balance": 13624052
            }
          },
          {
            "timestamp": 1767788218278,
            "level": "INFO",
            "location": "buy.ts:POST",
            "message": "Balance after transaction",
            "data": {
              "balanceAfter": 13624052
            }
          }
        ],
        "details": {
          "balanceAfter": 13624052
        }
      },
      {
        "name": "Post-processing",
        "duration": 136,
        "percentage": 5.277454404346138,
        "startTime": 1767788218278,
        "endTime": 1767788218414,
        "logs": [
          {
            "timestamp": 1767788218414,
            "level": "INFO",
            "location": "buy.ts:POST",
            "message": "Buy completed successfully",
            "data": {
              "order": {
                "symbol": "زر",
                "price": "682300",
                "quantity": "2",
                "side": "sell"
              },
              "duration": 2577,
              "model": "4",
              "assetData": {
                "balanceBefore": 13624052,
                "balanceAfter": 13624052,
                "change": 0,
                "changeType": "unchanged",
                "validation": {
                  "isValid": false,
                  "message": "هشدار: معامله ممکن است اجرا نشده باشد (تغییر صفر)",
                  "severity": "warning"
                }
              }
            }
          }
        ],
        "details": {
          "order": {
            "symbol": "زر",
            "price": "682300",
            "quantity": "2",
            "side": "sell"
          },
          "duration": 2577,
          "model": "4",
          "assetData": {
            "balanceBefore": 13624052,
            "balanceAfter": 13624052,
            "change": 0,
            "changeType": "unchanged",
            "validation": {
              "isValid": false,
              "message": "هشدار: معامله ممکن است اجرا نشده باشد (تغییر صفر)",
              "severity": "warning"
            }
          }
        }
      }
    ],
    "totalDuration": 2577,
    "overheadDuration": -138,
    "overheadPercentage": -5.355064027939465,
    "unaccountedTime": -138,
    "unaccountedPercentage": -5.355064027939465
  },
  "bottlenecks": [
    {
      "phase": "Buy Process (Selection + Panel + Fill + Submit)",
      "duration": 2577,
      "percentage": 100,
      "severity": "high",
      "recommendation": "Migration به Model 5 یا 6",
      "expectedImprovement": "کاهش 95%+ با migration به API"
    }
  ],
  "suggestions": [
    {
      "type": "model-migration",
      "priority": "high",
      "title": "Migration به Model 5 (API Direct)",
      "description": "Buy Process با Model 4 کند است. استفاده از Model 5 (API) می‌تواند زمان را به 50-100ms کاهش دهد.",
      "expectedImprovement": "2448ms (95%)",
      "implementation": "استفاده از Model 5 در dashboard: `model: \"5\"`",
      "impact": {
        "timeSaved": 2448,
        "percentageSaved": 95
      }
    },
    {
      "type": "model-migration",
      "priority": "medium",
      "title": "Migration به Model 6 (Ultra Fast)",
      "description": "Model 6 برای سرعت حداکثری طراحی شده است (target: <50ms)",
      "expectedImprovement": "2527ms (98%)",
      "implementation": "استفاده از Model 6 در dashboard: `model: \"6\"`",
      "impact": {
        "timeSaved": 2527,
        "percentageSaved": 98
      }
    }
  ],
  "modelComparison": {
    "currentModel": "4",
    "currentDuration": 2577,
    "alternatives": [
      {
        "model": 5,
        "modelName": "Model 5 (API Direct)",
        "estimatedDuration": 50,
        "improvement": 2527,
        "improvementPercentage": 98,
        "pros": [
          "API-based (بدون UI automation)",
          "سرعت بالا (50-100ms پس از بهینه‌سازی)",
          "قابلیت skip verification",
          "Token caching برای سرعت بیشتر"
        ],
        "cons": [
          "نیاز به token extraction",
          "وابستگی به API stability"
        ],
        "migrationComplexity": "low"
      },
      {
        "model": 6,
        "modelName": "Model 6 (Ultra Fast)",
        "estimatedDuration": 50,
        "improvement": 2527,
        "improvementPercentage": 98,
        "pros": [
          "سریع‌ترین model (<50ms)",
          "بدون verification",
          "بدون retry overhead",
          "بهینه شده برای سرعت حداکثری"
        ],
        "cons": [
          "بدون retry (در صورت خطا)",
          "بدون verification (نیاز به اطمینان از موفقیت)"
        ],
        "migrationComplexity": "medium"
      }
    ]
  },
  "summary": {
    "totalDuration": 2577,
    "benchmarkComparison": {
      "model4Benchmark": 200,
      "model5Benchmark": 364,
      "model6Target": 50,
      "vsModel4": 2377,
      "vsModel5": 2213,
      "vsModel6": 2527
    },
    "keyFindings": [
      "زمان اجرا (2577ms) بسیار بیشتر از benchmark Model 4 (200ms) است",
      "1 bottleneck اصلی شناسایی شد: Buy Process (Selection + Panel + Fill + Submit)"
    ]
  }
}